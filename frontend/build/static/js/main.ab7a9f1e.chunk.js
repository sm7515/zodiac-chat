(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{121:function(e,t){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),s=(a(70),a(71),a(63)),i=a(9),l=a(25);var u=a(6),m=a.n(u),p="http://linserv1.cims.nyu.edu:23203",g="ur59uiFSFXhPV9VS4FacayxkgdT6YNsQ";function d(e){var t=e.setError,a=e.error;return r.a.createElement("div",{className:"register"},r.a.createElement("form",{onSubmit:function(e){return function(e){var a=e.currentTarget.name.value,n=e.currentTarget.password.value,r=e.currentTarget.dob.value;e.preventDefault(),m.a.post("".concat(p,"/register"),{name:a,pwd:n,dob:r}).then((function(){window.location="/login"})).catch((function(e){console.log(e.response.data),t(e.response.data)}))}(e)},className:"register-form"},r.a.createElement("label",{htmlFor:"name"},"username: "),r.a.createElement("input",{type:"text",name:"name",required:!0}),r.a.createElement("label",{htmlFor:"dob"},"Date of Birth"),r.a.createElement("input",{type:"date",name:"dob",max:(new Date).toJSON().slice(0,10),required:!0}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",name:"password",minlength:"6",required:!0}),r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement("button",{onClick:function(){window.location="/login"}},"Login")),""!==a.error&&r.a.createElement("p",{className:"error"},a.error))}function f(e){var t=e.setError,a=e.error,n=e.setLogin,o=e.setName,c=e.setId,s=e.user;return r.a.createElement("div",{className:"login"},r.a.createElement("form",{onSubmit:function(e){return function(e){var a=e.currentTarget.name.value,r=e.currentTarget.password.value;e.preventDefault(),m.a.post("".concat(p,"/login"),{name:a,pwd:r}).then((function(e){localStorage.setItem("uid",e.data.id),o(e.data.name),c(e.data.id),n(s.id===localStorage.getItem("uid")),t("")})).catch((function(e){console.log(e),e.response&&t(e.response.data)}))}(e)},className:"login-form"},r.a.createElement("label",{htmlFor:"name"},"username: "),r.a.createElement("input",{type:"text",name:"name",required:!0}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",name:"password",required:!0}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("button",{onClick:function(){window.location="/"}},"Register")),""!==a.error&&r.a.createElement("p",{className:"error"},a.error))}var h=a(18),E=a(14),b=a(15),v=a(11),y=a(16),k=a(17),S=a(62),N=a.n(S),O={Aries:"#ff5353",Taurus:"#80c181",Gemini:"#ffe153",Cancer:"#c8c8c8",Leo:"#ffa359",Virgo:"#b08266",Libra:"#fdbebc",Scorpio:"#242424",Sagittarius:"#c0adef",Capricorn:"#666b66",Aquarius:"#80bfea",Pisces:"#a1e2c4"},j=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e="10px solid"+O[this.props.sign],t={alignSelf:this.props.myName?"flex-end":"flex-start",flexDirection:this.props.myName?"row-reverse":"row",borderLeft:this.props.myName?"none":e,borderRight:this.props.myName?e:"none"},a=O[this.props.sign],n=new Date(this.props.timestamp);return r.a.createElement("div",{className:"Message",style:t},r.a.createElement("div",{className:"profile-img",style:{backgroundColor:"".concat(a)}},r.a.createElement("img",{src:this.props.img,alt:"zodiac-sign"})),this.props.text&&r.a.createElement("p",null,this.props.text),this.props.gif&&r.a.createElement("img",{alt:"gif",src:this.props.gif}),r.a.createElement("span",{className:"timestamp"},r.a.createElement("span",null,this.props.name),n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()))}}]),a}(n.Component);function w(e){var t=e.socket,a=e.gifs,n=e.user,o=e.clicked;return r.a.createElement("div",{className:"gif-items"},a.map((function(e,a){return r.a.createElement("div",{className:"gif-item"},r.a.createElement("img",{key:a,alt:"gif ".concat(a),src:e.img.url,onClick:function(e){!function(e){t.emit("new gif",[e.currentTarget.src,n]),o(!1)}(e)},height:.8*e.img.height,width:"100px"}))})))}function I(e){var t=e.socket,a=e.user,o=e.clicked,c=Object(n.useState)([]),s=Object(h.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)(!1),p=Object(h.a)(u,2),d=p[0],f=p[1],E=Object(n.useState)(""),b=Object(h.a)(E,2),v=b[0],y=b[1],k=function(e){i=[],e.forEach((function(e){var t={img:e.images.fixed_height_small};i.push(t)})),l(i),f(d=!0)};return Object(n.useEffect)((function(){console.log(v),""!==v?m.a.get("http://api.giphy.com/v1/gifs/search?q=".concat(v,"&api_key=").concat(g,"&limit=24")).then((function(e){console.log(e.data),k(e.data.data)})).catch((function(e){console.log(e)})):m.a.get("http://api.giphy.com/v1/gifs/trending?api_key=".concat(g,"&limit=24")).then((function(e){k(e.data.data)})).catch((function(e){console.log(e)}))}),[v]),Object(n.useEffect)((function(){d&&(f(!1),console.log(i.length))}),[d]),r.a.createElement("div",{className:"emoji-container"},0!==i.length&&r.a.createElement(w,{socket:t,gifs:i,user:a,clicked:o}),r.a.createElement("input",{type:"text",placeholder:"Search GIPHY...",value:v,onChange:function(e){return t=e.target.value,void y(t);var t},style:{backgroundColor:"".concat(O[a.sign])}}))}var x=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={clicked:!1},n.submit=n.submit.bind(Object(v.a)(n)),n.click=n.click.bind(Object(v.a)(n)),n}return Object(b.a)(a,[{key:"submit",value:function(e){e.preventDefault(),this.props.socket.emit("new message",[e.target.text.value,this.props.user]),e.target.text.value=""}},{key:"click",value:function(e){this.setState({clicked:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"total-container"},r.a.createElement("form",{onSubmit:this.submit,className:"composer-container"},r.a.createElement("input",{autoComplete:"off",name:"text",className:"composer",autoFocus:!0})),r.a.createElement("button",{className:"emoji-picker",onClick:function(){return e.setState({clicked:!e.state.clicked})}},r.a.createElement("a",{href:"https://icons8.com/icon/85774/happy",style:{display:"none"}},"Happy icon by Icons8"),r.a.createElement("img",{src:"https://img.icons8.com/material-outlined/48/".concat(O[this.props.user.sign].slice(1),"/happy.png")})),this.state.clicked&&r.a.createElement(I,{socket:this.props.socket,user:this.props.user,clicked:this.click}))}}]),a}(n.Component),T=function(e){Object(k.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={messages:[]},n.logout=n.logout.bind(Object(v.a)(n)),n}return Object(b.a)(a,[{key:"logout",value:function(){var e=this;m.a.post("".concat(p,"/login/logout"),{id:this.props.user.id}).then((function(t){console.log(t),localStorage.setItem("uid",""),e.props.setLogin(!1),e.socket.disconnect()})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.socket=N.a.connect("".concat(p)),this.socket.on("connect",(function(){e.socket.emit("request sign",[e.props.user.sign,e.props.user.name,e.props.user.img])})),this.socket.on("new message",(function(t){var a=e.state.messages.slice();a.push(t),e.setState({messages:a})})),this.socket.on("socket in use",(function(){window.location="/login"}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(t,a){return r.a.createElement(j,{myName:t.name===e.props.user.name,text:t.text&&t.text,gif:t.gif&&t.gif,sign:t.sign,timestamp:t.timestamp,img:t.img,name:t.name,key:a})})).reverse();return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.logout,className:"logout",style:{border:"2px solid ".concat(O[this.props.user.sign]),color:"".concat(O[this.props.user.sign])}},"logout"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"messages"},t)),r.a.createElement("div",{className:"text-area"},r.a.createElement(x,{socket:this.socket,user:this.props.user})))}}]),a}(n.Component);function L(e){var t=e.setLogin,a=e.user,o=e.setImg,c=e.setSign,s=e.setName,i=localStorage.getItem("uid"),l=Object(n.useState)(!1),u=Object(h.a)(l,2),g=u[0],d=u[1];return Object(n.useEffect)((function(){i=localStorage.getItem("uid"),a.id=i,""!==i&&m.a.get("".concat(p,"/user?id=").concat(i)).then((function(e){a.name=e.data.name,a.sign=e.data.sign,a.img=e.data.img,o(a.img),c(a.sign),s(a.name),console.log(a),d(g=!0)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",{className:"home"},""!==a.sign&&""!==a.img&&g&&r.a.createElement(T,{user:a,setLogin:t}))}var _=Object(l.b)((function(e){return{user:e.userReducer,error:e.errorReducer}}),(function(e){return{setName:function(t){e(function(e){return{type:"SET_NAME",payload:e}}(t))},setId:function(t){e(function(e){return{type:"SET_ID",payload:e}}(t))},setSign:function(t){e(function(e){return{type:"SET_SIGN",payload:e}}(t))},setImg:function(t){e(function(e){return{type:"SET_IMG",payload:e}}(t))},setLogin:function(t){e({type:"SET_LOGIN",payload:t})},setError:function(t){e(function(e){return{type:"SET_ERROR",payload:e}}(t))}}}))((function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.b,{exact:!0,path:"/"},""===localStorage.getItem("uid")?r.a.createElement(d,{setError:e.setError,error:e.error}):r.a.createElement(i.a,{to:"/home"})),r.a.createElement(i.b,{exact:!0,path:"/login"},""===localStorage.getItem("uid")||localStorage.getItem("uid")!==e.user.id?r.a.createElement(f,{setError:e.setError,error:e.error,setLogin:e.setLogin,setName:e.setName,setId:e.setId,user:e.user}):r.a.createElement(i.a,{to:"/home"})),r.a.createElement(i.b,{exact:!0,path:"/home"},""!==localStorage.getItem("uid")?r.a.createElement(L,{setLogin:e.setLogin,user:e.user,setSign:e.setSign,setImg:e.setImg,setId:e.setId,setName:e.setName}):r.a.createElement(i.a,{to:"/login"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=a(20),R=a(10),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",sign:"",img:"",id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NAME":e=Object(R.a)({},e,{name:t.payload});break;case"SET_ID":e=Object(R.a)({},e,{id:t.payload});break;case"SET_SIGN":e=Object(R.a)({},e,{sign:t.payload});break;case"SET_IMG":e=Object(R.a)({},e,{img:t.payload});break;case"SET_LOGIN":e=Object(R.a)({},e,{loggedin:t.payload})}return e},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:""},t=arguments.length>1?arguments[1]:void 0;return"SET_ERROR"===t.type&&(e=Object(R.a)({},e,{error:t.payload})),e},q=Object(C.c)(Object(C.b)({userReducer:D,errorReducer:F}));c.a.render(r.a.createElement(l.a,{store:q},r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(125)},70:function(e,t,a){},71:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.ab7a9f1e.chunk.js.map